<template>
	<div>
		<v-form-render :form-json="formJson" :form-data="formData" :option-data="optionData" ref="vFormRef" v-if="isInit">
			<template #tabSlot> 123 </template>
			<template #searchBtn>
				<el-button type="primary" @click="submitForm">搜索</el-button>
				<el-button>重置</el-button>
			</template>
		</v-form-render>
	</div>
</template>

<script setup>
import { ref, reactive } from 'vue';
import { ElMessage } from 'element-plus';
import { useDictAsync, useTreeDictAsync } from '@cqdcg/admin/hooks/dict';

const formJson = reactive({
	widgetList: [
		{
			key: 83682,
			type: 'dict-select',
			icon: 'select-field',
			formItemFlag: true,
			options: {
				name: 'dictselect60957',
				keyNameEnabled: false,
				keyName: '',
				label: 'dict-select',
				labelAlign: '',
				defaultValue: '',
				placeholder: '',
				columnWidth: '200px',
				size: '',
				labelWidth: null,
				labelHidden: false,
				labelWrap: false,
				disabled: false,
				hidden: false,
				clearable: true,
				filterable: false,
				allowCreate: false,
				automaticDropdown: false,
				multiple: false,
				multipleLimit: 0,
				collapseTags: false,
				labelKey: 'label',
				valueKey: 'value',
				optionValueType: '',
				optionItems: [
					{ label: '日程记录', value: 'record' },
					{ label: '计划', value: 'plan' },
				],
				dictName: 'schedule_type',
				required: false,
				requiredHint: '',
				validation: '',
				validationHint: '',
				customClass: [],
				labelIconClass: null,
				labelIconPosition: 'rear',
				labelTooltip: null,
				onCreated: '',
				onMounted: '',
				onRemoteQuery: '',
				onChange: '',
				onFocus: '',
				onBlur: '',
				onValidate: '',
			},
			id: 'dictselect60957',
		},
		{
			key: 98914,
			type: 'dict-cascader',
			icon: 'select-field',
			formItemFlag: true,
			options: {
				name: 'dictcascader96936',
				keyNameEnabled: false,
				keyName: '',
				label: 'dict-cascader',
				labelAlign: '',
				defaultValue: '',
				placeholder: '',
				size: '',
				labelWidth: null,
				labelHidden: false,
				columnWidth: '200px',
				disabled: false,
				hidden: false,
				clearable: true,
				filterable: false,
				multiple: false,
				checkStrictly: false,
				showAllLevels: true,
				dsEnabled: false,
				dsName: '',
				dataSetName: '',
				labelKey: 'label',
				valueKey: 'value',
				childrenKey: 'children',
				areaDataEnabled: false,
				areaDataType: 0,
				optionItems: [
					{
						id: '1823620071042166786',
						parentId: '0',
						weight: 1,
						name: '管理类',
						createBy: 'admin',
						updateBy: 'admin',
						createTime: '2024-08-14 15:18:00',
						itemValue: '1',
						sortOrder: 1,
						description: '管理类',
						updateTime: '2024-08-23 16:24:02',
						label: '管理类',
						dictId: '1823619985033768961',
						value: '1',
						dictType: 'expert_type',
						remarks: '管理类',
						children: [
							{
								id: '1826897442020700162',
								parentId: '1823620071042166786',
								weight: 1,
								name: '行政单位',
								createBy: 'admin',
								updateBy: 'admin',
								createTime: '2024-08-23 16:21:06',
								itemValue: '1-1',
								sortOrder: 1,
								description: '行政单位',
								updateTime: '2024-09-02 11:04:25',
								label: '行政单位',
								dictId: '1823619985033768961',
								value: '1-1',
								dictType: 'expert_type',
								remarks: '行政单位',
							},
							{
								id: '1826897686691229698',
								parentId: '1823620071042166786',
								weight: 2,
								name: '事业单位',
								createBy: 'admin',
								updateBy: 'admin',
								createTime: '2024-08-23 16:22:05',
								itemValue: '1-2',
								sortOrder: 2,
								description: '事业单位',
								updateTime: '2024-09-02 11:04:31',
								label: '事业单位',
								dictId: '1823619985033768961',
								value: '1-2',
								dictType: 'expert_type',
								remarks: '事业单位',
							},
						],
					},
					{
						id: '1823620118039343105',
						parentId: '0',
						weight: 2,
						name: '技术类',
						createBy: 'admin',
						updateBy: 'admin',
						createTime: '2024-08-14 15:18:12',
						itemValue: '2',
						sortOrder: 2,
						description: '技术类',
						updateTime: '2024-09-02 11:04:12',
						label: '技术类',
						dictId: '1823619985033768961',
						value: '2',
						dictType: 'expert_type',
						remarks: '技术类',
						children: [
							{
								id: '1826900210722713601',
								parentId: '1823620118039343105',
								weight: 1,
								name: '高校',
								createBy: 'admin',
								updateBy: 'admin',
								createTime: '2024-08-23 16:32:07',
								itemValue: '2-1',
								sortOrder: 1,
								description: '高校',
								updateTime: '2024-09-02 11:04:42',
								label: '高校',
								dictId: '1823619985033768961',
								value: '2-1',
								dictType: 'expert_type',
								remarks: '高校',
								children: [
									{
										id: '1827972801763913729',
										parentId: '1826900210722713601',
										weight: 1,
										name: '985工程高校',
										createBy: 'admin',
										updateBy: 'admin',
										createTime: '2024-08-26 15:34:12',
										itemValue: '2-1-1',
										sortOrder: 1,
										description: '985工程高校',
										updateTime: '2024-09-02 11:05:08',
										label: '985工程高校',
										dictId: '1823619985033768961',
										value: '2-1-1',
										dictType: 'expert_type',
										remarks: '985工程高校',
									},
									{
										id: '1827972893971492866',
										parentId: '1826900210722713601',
										weight: 2,
										name: '211工程高校',
										createBy: 'admin',
										updateBy: 'admin',
										createTime: '2024-08-26 15:34:34',
										itemValue: '2-1-2',
										sortOrder: 2,
										description: '211工程高校',
										updateTime: '2024-09-02 11:05:13',
										label: '211工程高校',
										dictId: '1823619985033768961',
										value: '2-1-2',
										dictType: 'expert_type',
										remarks: '211工程高校',
									},
									{
										id: '1827972985029832706',
										parentId: '1826900210722713601',
										weight: 3,
										name: '中央部署高校',
										createBy: 'admin',
										updateBy: 'admin',
										createTime: '2024-08-26 15:34:56',
										itemValue: '2-1-3',
										sortOrder: 3,
										description: '中央部署高校',
										updateTime: '2024-09-02 11:05:18',
										label: '中央部署高校',
										dictId: '1823619985033768961',
										value: '2-1-3',
										dictType: 'expert_type',
										remarks: '中央部署高校',
									},
									{
										id: '1827973131339739138',
										parentId: '1826900210722713601',
										weight: 4,
										name: '省属本科高校',
										createBy: 'admin',
										updateBy: 'admin',
										createTime: '2024-08-26 15:35:31',
										itemValue: '2-1-4',
										sortOrder: 4,
										description: '省属本科高校',
										updateTime: '2024-09-02 11:05:23',
										label: '省属本科高校',
										dictId: '1823619985033768961',
										value: '2-1-4',
										dictType: 'expert_type',
										remarks: '省属本科高校',
									},
									{
										id: '1827973490523156482',
										parentId: '1826900210722713601',
										weight: 5,
										name: '高职(高专)高校',
										createBy: 'admin',
										updateBy: 'admin',
										createTime: '2024-08-26 15:36:56',
										itemValue: '2-1-5',
										sortOrder: 5,
										description: '高职(高专)高校',
										updateTime: '2024-09-02 11:05:27',
										label: '高职(高专)高校',
										dictId: '1823619985033768961',
										value: '2-1-5',
										dictType: 'expert_type',
										remarks: '高职(高专)高校',
									},
								],
							},
							{
								id: '1826900288652881921',
								parentId: '1823620118039343105',
								weight: 2,
								name: '科研机构',
								createBy: 'admin',
								updateBy: 'admin',
								createTime: '2024-08-23 16:32:25',
								itemValue: '2-2',
								sortOrder: 2,
								description: '科研机构',
								updateTime: '2024-09-02 11:05:48',
								label: '科研机构',
								dictId: '1823619985033768961',
								value: '2-2',
								dictType: 'expert_type',
								remarks: '科研机构',
							},
							{
								id: '1826900541682659330',
								parentId: '1823620118039343105',
								weight: 3,
								name: '企业',
								createBy: 'admin',
								updateBy: 'admin',
								createTime: '2024-08-23 16:33:25',
								itemValue: '2-3',
								sortOrder: 3,
								description: '企业',
								updateTime: '2024-09-02 11:04:53',
								label: '企业',
								dictId: '1823619985033768961',
								value: '2-3',
								dictType: 'expert_type',
								remarks: '企业',
								children: [
									{
										id: '1827973660816093185',
										parentId: '1826900541682659330',
										weight: 1,
										name: '央企',
										createBy: 'admin',
										updateBy: 'admin',
										createTime: '2024-08-26 15:37:37',
										itemValue: '2-3-1',
										sortOrder: 1,
										description: '央企',
										updateTime: '2024-09-02 11:06:04',
										label: '央企',
										dictId: '1823619985033768961',
										value: '2-3-1',
										dictType: 'expert_type',
										remarks: '央企',
									},
									{
										id: '1827973739568345090',
										parentId: '1826900541682659330',
										weight: 2,
										name: '国企',
										createBy: 'admin',
										updateBy: 'admin',
										createTime: '2024-08-26 15:37:56',
										itemValue: '2-3-2',
										sortOrder: 2,
										description: '国企',
										updateTime: '2024-09-02 11:06:08',
										label: '国企',
										dictId: '1823619985033768961',
										value: '2-3-2',
										dictType: 'expert_type',
										remarks: '国企',
									},
									{
										id: '1827973814658969601',
										parentId: '1826900541682659330',
										weight: 3,
										name: '民营企业',
										createBy: 'admin',
										updateBy: 'admin',
										createTime: '2024-08-26 15:38:14',
										itemValue: '2-3-3',
										sortOrder: 3,
										description: '民营企业',
										updateTime: '2024-09-02 11:06:13',
										label: '民营企业',
										dictId: '1823619985033768961',
										value: '2-3-3',
										dictType: 'expert_type',
										remarks: '民营企业',
									},
								],
							},
						],
					},
				],
				required: false,
				requiredHint: '',
				customRule: '',
				customRuleHint: '',
				dictName: 'expert_type',
				customClass: '',
				labelIconClass: null,
				labelIconPosition: 'rear',
				labelTooltip: null,
				onCreated: '',
				onMounted: '',
				onChange: '',
				onFocus: '',
				onBlur: '',
				onValidate: '',
			},
			id: 'dictcascader96936',
		},
		{
			key: 75093,
			type: 'select',
			icon: 'select-field',
			formItemFlag: true,
			options: {
				name: 'select42936',
				keyNameEnabled: true,
				keyName: 'select',
				label: 'select',
				labelAlign: '',
				defaultValue: '',
				placeholder: '',
				columnWidth: '200px',
				size: '',
				labelWidth: null,
				labelHidden: false,
				labelWrap: false,
				disabled: false,
				hidden: false,
				clearable: true,
				filterable: false,
				allowCreate: false,
				remote: false,
				automaticDropdown: false,
				multiple: false,
				multipleLimit: 0,
				collapseTags: false,
				dsEnabled: false,
				dsName: '',
				dataSetName: '',
				labelKey: 'label',
				valueKey: 'value',
				optionValueType: '',
				optionItems: [
					{ label: 'select 1', value: 1 },
					{ label: 'select 2', value: 2 },
					{ label: 'select 3', value: 3 },
				],
				required: false,
				requiredHint: '',
				validation: '',
				validationHint: '',
				customClass: '',
				labelIconClass: null,
				labelIconPosition: 'rear',
				labelTooltip: null,
				onCreated: '',
				onMounted: '',
				onRemoteQuery: '',
				onChange: '',
				onFocus: '',
				onBlur: '',
				onValidate: '',
			},
			id: 'select42936',
		},
		{
			key: 93249,
			type: 'cascader',
			icon: 'cascader-field',
			formItemFlag: true,
			options: {
				name: 'cascader102224',
				keyNameEnabled: true,
				keyName: 'cascader',
				label: 'cascader',
				labelAlign: '',
				defaultValue: '',
				placeholder: '',
				size: '',
				labelWidth: null,
				labelHidden: false,
				columnWidth: '200px',
				disabled: false,
				hidden: false,
				clearable: true,
				filterable: false,
				multiple: false,
				checkStrictly: false,
				showAllLevels: true,
				dsEnabled: false,
				dsName: '',
				dataSetName: '',
				labelKey: 'label',
				valueKey: 'value',
				childrenKey: 'children',
				areaDataEnabled: false,
				areaDataType: 0,
				optionItems: [
					{ label: 'select 1', value: 1, children: [{ label: 'child 1', value: 11 }] },
					{ label: 'select 2', value: 2 },
					{ label: 'select 3', value: 3 },
				],
				required: false,
				requiredHint: '',
				customRule: '',
				customRuleHint: '',
				customClass: '',
				labelIconClass: null,
				labelIconPosition: 'rear',
				labelTooltip: null,
				onCreated: '',
				onMounted: '',
				onChange: '',
				onFocus: '',
				onBlur: '',
				onValidate: '',
			},
			id: 'cascader102224',
		},
	],
	formConfig: {
		modelName: 'formData',
		refName: 'vForm',
		rulesName: 'rules',
		labelWidth: 80,
		labelPosition: 'left',
		h5LabelTop: true,
		gridResponsive: true,
		size: '',
		labelAlign: 'label-left-align',
		cssCode: '',
		customClass: [],
		functions: '',
		layoutType: 'PC',
		jsonVersion: 3,
		dataSources: [],
		onFormCreated: '',
		onFormMounted: '',
		onFormDataChange: '',
		onFormValidate: '',
	},
});
const formData = reactive({ name: '2', org: '3', dept: '4', main: '5', state: '1' });
let optionData = {};
const isInit = ref(false);
const vFormRef = ref(null);
onMounted(async () => {
	const { schedule_type } = await useDictAsync('schedule_type');
	const { expert_type } = await useTreeDictAsync('expert_type');
	optionData = { select: schedule_type, cascader: expert_type };
	isInit.value = true;
});

const submitForm = () => {
	vFormRef.value
		.getFormData()
		.then((formData) => {
			// Form Validation OK
			alert(JSON.stringify(formData));
		})
		.catch((error) => {
			// Form Validation failed
			ElMessage.error(error);
		});
};
</script>
